---
import "../styles/global.scss";
import AmbientSpotlight from "../components/AmbientSpotlight.svelte";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Astro Page</title>

    <script is:inline>
      (function () {
        try {
          const root = document.documentElement;

          // 1. Restore Atmosphere
          const savedAtmosphere = localStorage.getItem("void_atmosphere");
          const theme = savedAtmosphere || "void";
          root.setAttribute("data-atmosphere", theme);

          // 2. Restore Font Override
          const savedFont = localStorage.getItem("void_user_font");
          if (savedFont && savedFont !== "default") {
            root.style.setProperty("--user-font-body", savedFont);
          }

          // 3. Restore Text Scale
          const savedScale = localStorage.getItem("void_text_scale");
          if (savedScale) {
            root.style.setProperty("--text-scale", savedScale);
          }
        } catch (e) {
          console.warn("Void Energy: Theme hydration failed", e);
        }
      })();
    </script>
  </head>
  <body>
    <AmbientSpotlight client:load />
  </body>
</html>
