/*
 * ROLE: Animation primitives.
 * RESPONSIBILITY: Houses shared keyframes and entry mixins tuned to the Triad Engine timings.
 */

@use '../abstracts' as *;

/* ==========================================================================
   MOTION NOTES
   - entry-transition mixin: standard slide-and-focus entry tuned to physics easing.
   - Keyframes: shimmer, cyber-pulse, rotate-laser, progress-fill, logo-enter.
   ========================================================================== */

// ==========================================================================
// 1. CONTROL MIXINS
// ==========================================================================

// Standard Entry Transition (The "Cyber Slide")
// Usage: @include entry-transition; inside a class (e.g., .fade-in)
@mixin entry-transition($duration: 0.4s, $delay: 0s) {
  will-change: transform, opacity, filter;

  // Use --ease-stabilize for the "Slide In" feel
  transition:
    opacity $duration var(--ease-stabilize) $delay,
    transform $duration var(--ease-stabilize) $delay,
    filter $duration var(--ease-stabilize) $delay;

  opacity: 1;
  transform: translateY(0) scale(1);
  filter: blur(0);

  @starting-style {
    opacity: 0;
    transform: translateY(10px) scale(0.98);
    filter: blur(var(--physics-blur));
  }

  // Motion Opt-Out (Direct Override)
  @media (prefers-reduced-motion: reduce) {
    transition: none;
    transform: none;
    filter: none;
    opacity: 1;

    @starting-style {
      opacity: 1;
      transform: none;
      filter: none;
    }
  }
}

// ==========================================================================
// 2. CORE KEYFRAMES
// ==========================================================================

// A. SHIMMER (Loading/Energy)
// Used by: .shimmer (Helpers)
@keyframes shimmer {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

// B. CYBER PULSE (Active States)
// Used by: .cyber-pulse (Helpers)
@keyframes cyber-pulse {
  0%,
  100% {
    opacity: 1;
    box-shadow: 0 0 10px fade(var(--energy-primary), 60%);
  }
  50% {
    opacity: 0.9;
    box-shadow: 0 0 20px fade(var(--energy-primary), 20%);
  }
}

// C. ROTATE LASER (Gemini Button)
// Used by: .btn-cta (Buttons)
@keyframes rotate-laser {
  from {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  to {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

// D. PROGRESS FILL
// Used by: .progress-bar (Helpers)
@keyframes progress-fill {
  from {
    width: 0%;
  }
  to {
    width: 100%;
  }
}

// E. LOGO ENTRY (Holographic Materialization)
// Used by: .loading-logo (Helpers)
@keyframes logo-enter {
  0% {
    opacity: 0;
    transform: scale(0.8); // Starts slightly smaller
    filter: blur(12px); // Starts out of focus (Void Physics)
  }
  100% {
    opacity: 1;
    transform: scale(1);
    filter: blur(0); // Snaps into focus
  }
}
