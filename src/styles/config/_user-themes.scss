@use 'sass:map';
@use '../abstracts/variables' as *;

/* ==========================================================================
   VOID ENERGY THEME CONFIG
   --------------------------------------------------------------------------
   This file is the ONLY place collaborators should touch to add/modify themes.
   The engine reads these maps, merges physics presets, and emits CSS variables.

   RUNTIME ATTRIBUTES (set on <html>):
   - data-atmosphere : theme name (e.g., "void", "paper", "terminal", etc.)
   - data-physics    : physics preset ("glass" | "flat" | "retro")
   - data-mode       : "light" | "dark" (must mirror the theme config type)
   These MUST stay in sync with the active theme config; SCSS overrides depend on them.

   QUICK START (copy/paste template):
   --------------------------------------------------------------------------
   $themes: (
     'my-theme': (
       'type': 'dark', // or 'light' (auto-sets color-scheme)
       'physics': 'glass', // pick: glass | flat | retro
       'palette': map.merge(
         $shared-values,
         map.merge(
           $semantic-dark,
           (
             // REQUIRED KEYS (UI breaks if missing):
             'bg-canvas': <color>,
             'bg-spotlight': <color>,
             'bg-surface': <color>,
             'bg-sink': <color>,
             'energy-primary': <color>,
             'energy-secondary': <color>,
             'border-highlight': <color>,
             'border-shadow': <color>,
             'text-main': <color>,
             'text-dim': <color>,
             'text-mute': <color>
           )
         )
       )
     )
   );

   RUNTIME HOOK:
   --------------------------------------------------------------------------
   const config = themes[name];
   document.documentElement.setAttribute('data-atmosphere', name);
   document.documentElement.setAttribute('data-physics', config.physics);
   document.documentElement.setAttribute('data-mode', config.type === 'light' ? 'light' : 'dark');

   RULES / CONSTRAINTS:
   - Required palette keys: bg-canvas, bg-surface, bg-sink, bg-spotlight,
     energy-primary, energy-secondary, border-highlight, border-shadow,
     text-main, text-dim, text-mute. Missing any of these will break UI.
   - Always use the inheritance pattern: map.merge($shared-values, map.merge($semantic-*, (...))).
     Skipping this likely breaks variables; we do NOT support manual full listings.
   - Physics presets are fixed (glass | flat | retro). Do not document or add new presets here.
   - color-scheme is auto-set by the theme engine; scrollbars are auto-styled in _reset.scss.
   - Surfaces: never hardcode radius or blur; use var(--radius-base) and mixins.
     Only geometric shapes (50%, 999px) are exempt.
   - backdrop-filter: never set manually; rely on mixins/physics vars.
   ========================================================================== */

$shared-values: (
  'text-scale': 1,
  'font-atmos-heading': $font-tech,
  'font-atmos-body': $font-tech,
  'font-heading': var(--user-font-heading, var(--font-atmos-heading)),
  'font-body': var(--user-font-body, var(--font-atmos-body))
);

$semantic-dark: (
  'color-premium': $semantic-dark-premium,
  'color-system': $semantic-dark-system,
  'color-success': $semantic-dark-success,
  'color-error': $semantic-dark-error,
  'gradient-premium': linear-gradient(to right, #ffa528, #ff8c00)
);

$semantic-light: (
  'color-premium': $semantic-light-premium,
  'color-system': $semantic-light-system,
  'color-success': $semantic-light-success,
  'color-error': $semantic-light-error,
  'gradient-premium': linear-gradient(to right, #f59e0b, #d97706)
);

// Configuration-driven atmospheres. Add or override entries in this map.
$themes: (
  // 1. VOID (Default)
  'void': (
    'type': 'dark',
    'physics': 'glass',
    'palette': map.merge(
      $shared-values,
      map.merge(
        $semantic-dark,
        (
          'bg-canvas': $void-deep,
          'bg-spotlight': $void-spotlight,
          'bg-surface': $void-navy,
          'bg-sink': rgba(0, 2, 41, 0.6),
          'energy-primary': $void-cyan,
          'energy-secondary': $void-blue,
          'border-highlight': rgba(56, 117, 250, 0.3),
          'border-shadow': rgba(56, 117, 250, 0.1),
          'text-main': #ffffff,
          'text-dim': rgba(255, 255, 255, 0.85),
          'text-mute': rgba(255, 255, 255, 0.6)
        )
      )
    )
  ),

  // 2. PAPER (Reading)
  'paper': (
    'type': 'light',
    'physics': 'flat',
    'palette': map.merge(
      $shared-values,
      map.merge(
        $semantic-light,
        (
          'font-atmos-heading': $font-book,
          'font-atmos-body': $font-book,
          'bg-canvas': $paper-white,
          'bg-spotlight': $paper-spotlight,
          'bg-surface': $paper-sheet,
          'bg-sink': rgba(0, 0, 0, 0.05),
          'energy-primary': $paper-ink,
          'energy-secondary': $paper-pencil,
          'border-highlight': $paper-pencil,
          'border-shadow': $paper-pencil,
          'text-main': #000000,
          'text-dim': #333333,
          'text-mute': #666666
        )
      )
    )
  ),

  // 3. TERMINAL (Hacker)
  'terminal': (
    'type': 'dark',
    'physics': 'retro',
    'palette': map.merge(
      $shared-values,
      map.merge(
        $semantic-dark,
        (
          'font-atmos-heading': $font-code,
          'font-atmos-body': $font-code,
          'bg-canvas': $term-deep,
          'bg-spotlight': $term-spotlight,
          'bg-surface': rgba(0, 20, 0, 0.9),
          'bg-sink': #000000,
          'energy-primary': $term-amber,
          'energy-secondary': $term-amber,
          'border-highlight': $term-amber,
          'border-shadow': $term-amber,
          'text-main': $term-amber,
          'text-dim': rgba(245, 197, 24, 0.7),
          'text-mute': rgba(245, 197, 24, 0.5),
          'color-premium': $void-cyan,
          'gradient-premium': linear-gradient(to right, #33e2e6, #00c2ff),
          'color-success': #00ff41,
          'color-error': #ff3333
        )
      )
    )
  ),

  // 4. CRIMSON (Horror)
  'crimson': (
    'type': 'dark',
    'physics': 'glass',
    'palette': map.merge(
      $shared-values,
      map.merge(
        $semantic-dark,
        (
          'font-atmos-heading': $font-horror,
          'font-atmos-body': $font-horror,
          'bg-canvas': $crimson-deep,
          'bg-spotlight': $crimson-spotlight,
          'bg-surface': $crimson-blood,
          'bg-sink': rgba(20, 0, 0, 0.8),
          'energy-primary': $crimson-flare,
          'energy-secondary': $crimson-dark,
          'border-highlight': rgba(255, 60, 64, 0.3),
          'border-shadow': rgba(255, 60, 64, 0.1),
          'text-main': #ffe5e5,
          'text-dim': rgba(255, 200, 200, 0.8),
          'text-mute': rgba(255, 180, 180, 0.65)
        )
      )
    )
  ),

  // 5. OVERGROWTH (Nature)
  'overgrowth': (
    'type': 'dark',
    'physics': 'glass',
    'palette': map.merge(
      $shared-values,
      map.merge(
        $semantic-dark,
        (
          'font-atmos-heading': $font-nature,
          'font-atmos-body': $font-nature,
          'bg-canvas': $nature-deep,
          'bg-spotlight': $nature-spotlight,
          'bg-surface': $nature-moss,
          'bg-sink': rgba(0, 20, 5, 0.8),
          'energy-primary': $nature-neon,
          'energy-secondary': $nature-gold,
          'border-highlight': rgba(0, 224, 85, 0.3),
          'border-shadow': rgba(0, 224, 85, 0.1),
          'text-main': #f0fff4,
          'text-dim': rgba(200, 255, 200, 0.8),
          'text-mute': rgba(200, 255, 200, 0.6)
        )
      )
    )
  ),

  // 6. VELVET (Romance)
  'velvet': (
    'type': 'dark',
    'physics': 'glass',
    'palette': map.merge(
      $shared-values,
      map.merge(
        $semantic-dark,
        (
          'font-atmos-heading': $font-hand,
          'font-atmos-body': $font-hand,
          'bg-canvas': $velvet-deep,
          'bg-spotlight': $velvet-spotlight,
          'bg-surface': $velvet-silk,
          'bg-sink': rgba(30, 0, 10, 0.8),
          'energy-primary': $velvet-pink,
          'energy-secondary': $velvet-rose,
          'border-highlight': rgba(255, 128, 160, 0.3),
          'border-shadow': rgba(255, 128, 160, 0.1),
          'text-main': #fff0f5,
          'text-dim': rgba(255, 200, 220, 0.8),
          'text-mute': rgba(255, 180, 200, 0.6)
        )
      )
    )
  ),

  // 7. ONYX (Carbon / Minimal)
  'onyx': (
    'type': 'dark',
    'physics': 'glass',
    'palette': map.merge(
      $shared-values,
      map.merge(
        $semantic-dark,
        (
          'bg-canvas': #05060a,
          'bg-spotlight': #0b0e16,
          'bg-surface': rgba(12, 16, 28, 0.55),
          'bg-sink': rgba(5, 8, 12, 0.7),
          'energy-primary': #5bf5ff,
          'energy-secondary': #7d8bff,
          'border-highlight': rgba(91, 245, 255, 0.35),
          'border-shadow': rgba(125, 139, 255, 0.15),
          'text-main': #e8f1ff,
          'text-dim': rgba(232, 241, 255, 0.8),
          'text-mute': rgba(232, 241, 255, 0.6)
        )
      )
    )
  ),

  // 8. SOLAR (Luminous / Warm Light)
  'solar': (
    'type': 'light',
    'physics': 'flat',
    'palette': map.merge(
      $shared-values,
      map.merge(
        $semantic-light,
        (
          'bg-canvas': #fff8e6,
          'bg-spotlight': #fff4d6,
          'bg-surface': #fff0c2,
          'bg-sink': rgba(0, 0, 0, 0.06),
          'energy-primary': #ff9b1a,
          'energy-secondary': #ff6f61,
          'border-highlight': rgba(255, 155, 26, 0.45),
          'border-shadow': rgba(255, 155, 26, 0.2),
          'text-main': #1f1300,
          'text-dim': #4d3b1a,
          'text-mute': #7a6640
        )
      )
    )
  )
);
