@use '/src/styles/abstracts' as *;
@use 'animations' as *;

/* ==========================================================================
   VOID ENERGY UTILITY SYSTEM
   ==========================================================================
   
   PURPOSE:
   This file provides atomic, immutable utility classes to build layouts and 
   interactions rapidly. It replaces rigid CSS with composable logic.

   PHILOSOPHY: "Composition over Inheritance"
   Do not force styles. Stack them.
   - ❌ Avoid: .sidebar { display: flex; flex-direction: column; gap: 1rem; }
   - ✅ Prefer: <aside class="sidebar flex-col gap-16">

   --------------------------------------------------------------------------
   CHEAT SHEET & API REFERENCE
   --------------------------------------------------------------------------

   1. LAYOUT (Flexbox)
      - Base:       .flex (Just display:flex, no alignment)
      - Direction:  .flex-row | .flex-col
      - Shortcuts:  .flex-center (Perfect center) | .flex-center-col
      - Alignment:  .items-center | .items-start | .items-end | .items-stretch
      - Justify:    .justify-center | .justify-between | .justify-start | .justify-end
      - Wrapping:   .flex-wrap | .flex-nowrap
      - Sizing:     .full-w (width 100%) | .full-h (height 100%) | .flex-1 (fill space)

   2. SPACING (1 unit = 1px visual reference, mostly REM based)
      - Gaps:       .gap-8 | .gap-16 | .gap-24 | .gap-32 | .gap-64
      - Padding:    .pad-16 | .pad-24 | .pad-32 | .pad-inline (24px horizontal)
      - Margin:     .mar-16 | .mar-auto (Horizontal Center)

   3. PHYSICS & SHAPE (Atmosphere Aware)
      - Radius:     .round-8 | .round-12 | .round-16 | .round-24 | .round-full
      - Blur:       .blur (Adapts: 20px in Void, 0px in Paper, 2px in Terminal)

   4. ANIMATION (Time)
      - Entry:      .fade-in (add .delay-1 through .delay-5)
      - Loading:    .shimmer (Adapts color to current atmosphere)
      - Action:     .cyber-pulse (Breathing glow for active states)
      - Progress:   .progress-bar > <span> (Inner span animates fill)

   5. TEXT (Typography)
      - Highlight:  .text-highlight (Neon glow using current atmosphere energy)
      - Accessibility: .sr-only (Screen reader only content)

   --------------------------------------------------------------------------
   COMMON PATTERNS (Copy-Paste)
   --------------------------------------------------------------------------

   A. THE STANDARD PAGE SECTION (Vertical Stack)
      Combines the responsive container width with a vertical column layout.
      <section class="container flex-col gap-24">
        <h2>Title</h2>
        <p>Content...</p>
      </section>

   B. THE CENTERED HERO (Hero Section)
      Centers text and buttons in the middle of the container.
      <div class="container flex-center-col gap-16 pad-32">
         <h1>Welcome</h1>
         <button>Start</button>
      </div>

   C. THE NAVBAR (Full width glass, constrained content)
      The outer nav is full width/glass, the inner div constrains content.
      <nav class="w-full blur pad-16">
         <div class="container flex-row justify-between items-center">
            <div class="logo">Logo</div>
            <div class="links">...</div>
         </div>
      </nav>
      
   -------------------------------------------------------------------------- */

// ==========================================================================
// UTILITY CLASSES (The Public API)
// ==========================================================================

// --------------------------------------------------------------------------
// 1. LAYOUT & FLEXBOX
// --------------------------------------------------------------------------

// A. The Base (Pure)
.flex {
  display: flex;
  // No direction/alignment defined by default. 
  // This allows it to wrap inputs or text without centering them weirdly.
}

// B. Direction Shortcuts
.flex-col {
  display: flex;
  flex-direction: column;
}

.flex-row {
  display: flex;
  flex-direction: row;
}

// C. Alignment Shortcuts (The "Void" Center)
// Use this when you specifically want that "Centered Card" look
.flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.flex-center-col {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

// D. Alignment Modifiers
.items-center { align-items: center; }
.items-start  { align-items: flex-start; }
.items-end    { align-items: flex-end; }
.items-stretch{ align-items: stretch; }

.justify-center { justify-content: center; }
.justify-between{ justify-content: space-between; }
.justify-start  { justify-content: flex-start; }
.justify-end    { justify-content: flex-end; }

.flex-wrap    { flex-wrap: wrap; }
.flex-nowrap  { flex-wrap: nowrap; }
.flex-1       { flex: 1; } // Fills remaining space
.full-w       { width: 100%; }
.full-h       { height: 100%; }

// --------------------------------------------------------------------------
// 2. SPACING 
// --------------------------------------------------------------------------

// Gap
.gap-8  { gap: 0.5rem; }
.gap-16 { gap: 1rem; }
.gap-24 { gap: 1.5rem; }
.gap-32 { gap: 2rem; }
.gap-64 { gap: 4rem; }

// Padding
.pad-16 { padding: 1rem; }
.pad-24 { padding: 1.5rem; }
.pad-32 { padding: 2rem; }
.pad-inline { padding-inline: 1.5rem; }

// Margins
.mar-16 { margin: 1rem; }
.mar-auto { margin-inline: auto; }

// --------------------------------------------------------------------------
// 3. VISUAL PHYSICS & SHAPE
// --------------------------------------------------------------------------

// Dynamic Blur
// Adapts to atmosphere: 20px (Void) / 2px (Terminal) / 0px (Paper)
.blur {
  -webkit-backdrop-filter: blur(var(--physics-blur));
  backdrop-filter: blur(var(--physics-blur));
}

// Border Radius
.round-8    { border-radius: 0.5rem; }   // Inner elements (buttons, inputs)
.round-12   { border-radius: 0.75rem; }  // Tiles
.round-16   { border-radius: 1rem; }     // Containers
.round-24   { border-radius: 1.5rem; }   // Modals
.round-full { border-radius: 9999px; }   // Circles

// --------------------------------------------------------------------------
// 4. ANIMATION UTILITIES
// --------------------------------------------------------------------------

// Entry Animations
// Usage: <div class="fade-in delay-1">
.fade-in {
  @include entry-transition;
}

// Staggered Delays
.delay-1 { transition-delay: 50ms; }
.delay-2 { transition-delay: 100ms; }
.delay-3 { transition-delay: 150ms; }
.delay-4 { transition-delay: 200ms; }
.delay-5 { transition-delay: 250ms; }

// Loading Shimmer (Skeleton)
// Usage: <div class="shimmer round-8" style="height: 20px;"></div>
.shimmer {
  background: linear-gradient(
    90deg,
    var(--bg-sink) 0%, 
    var(--bg-sink) 40%, 
    color-mix(in srgb, var(--energy-primary), transparent 80%) 50%,
    var(--bg-sink) 60%, 
    var(--bg-sink) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 2s infinite linear;
}

// Interactive Loop (Breathing Glow)
.cyber-pulse {
  animation: cyber-pulse 3s var(--ease-pulse) infinite;
}

// Progress Bar
// Usage: <div class="progress-bar"><span></span></div>
.progress-bar {
  width: 100%;
  height: 4px;
  background: var(--bg-sink);
  border-radius: 2px;
  overflow: hidden;

  span {
    display: block;
    height: 100%;
    background: linear-gradient(135deg, var(--energy-primary), var(--energy-secondary));
    box-shadow: 0 0 10px color-mix(in srgb, var(--energy-primary), transparent 40%);
    border-radius: inherit;
    animation: progress-fill 2s ease-out forwards;
  }
}

// --------------------------------------------------------------------------
// 5. TEXT UTILITIES
// --------------------------------------------------------------------------

// Neon Highlight
.text-highlight {
  @include text-glow; // Uses current atmosphere primary energy
  font-weight: 600;
}

// Accessibility
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}