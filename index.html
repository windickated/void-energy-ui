<script is:inline>
  (function () {
    try {
      var root = document.documentElement;
      var store = localStorage;

      // 1. CONFIGURATION LOOKUP (Minimal)
      // We need this to know if we should render Light Mode or Retro Physics immediately.
      var map = {
        'terminal':   { p: 'retro', m: 'dark' },
        'paper':      { p: 'flat',  m: 'light' },
        'laboratory': { p: 'flat',  m: 'light' },
        'solar':      { p: 'glass', m: 'light' }
      };

      // 2. RESTORE ATMOSPHERE
      var atmos = store.getItem('void_atmosphere') || 'void';
      var config = map[atmos] || { p: 'glass', m: 'dark' }; // Default to Void

      root.setAttribute('data-atmosphere', atmos);
      root.setAttribute('data-physics', config.p);
      root.setAttribute('data-mode', config.m);

      // 3. RESTORE FONT
      var font = store.getItem('void_user_font');
      if (font && font !== 'default') {
        root.style.setProperty('--user-font-body', font);
      }

      // 4. RESTORE SCALE
      var scale = store.getItem('void_text_scale');
      if (scale) {
        root.style.setProperty('--text-scale', scale);
      }

    } catch (e) {
      // Fail silently, defaults in CSS will take over
    }
  })();
</script>